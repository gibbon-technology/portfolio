import{r as p,R as vt,j as E,a as Zt}from"./index-a52d1a1f.js";const te="/main_assets/sunrise-ce1b129e.svg",ee="/main_assets/sunset-a8dc7115.svg",ne="/main_assets/wind-78f5db0e.svg",se="/main_assets/degreesC-e7f95b70.svg",re="/main_assets/temperature-ead26748.svg";var Ut={exports:{}},Pt={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X=p;function oe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ie=typeof Object.is=="function"?Object.is:oe,ae=X.useState,ce=X.useEffect,ue=X.useLayoutEffect,le=X.useDebugValue;function fe(t,e){var s=e(),r=ae({inst:{value:s,getSnapshot:e}}),n=r[0].inst,o=r[1];return ue(function(){n.value=s,n.getSnapshot=e,ft(n)&&o({inst:n})},[t,s,e]),ce(function(){return ft(n)&&o({inst:n}),t(function(){ft(n)&&o({inst:n})})},[t]),le(s),s}function ft(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!ie(t,s)}catch{return!0}}function de(t,e){return e()}var he=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?de:fe;Pt.useSyncExternalStore=X.useSyncExternalStore!==void 0?X.useSyncExternalStore:he;Ut.exports=Pt;var Ee=Ut.exports;const U=()=>{},x=U(),dt=Object,a=t=>t===x,M=t=>typeof t=="function",P=(t,e)=>({...t,...e}),pe=t=>M(t.then),it=new WeakMap;let me=0;const et=t=>{const e=typeof t,s=t&&t.constructor,r=s==Date;let n,o;if(dt(t)===t&&!r&&s!=RegExp){if(n=it.get(t),n)return n;if(n=++me+"~",it.set(t,n),s==Array){for(n="@",o=0;o<t.length;o++)n+=et(t[o])+",";it.set(t,n)}if(s==dt){n="#";const c=dt.keys(t).sort();for(;!a(o=c.pop());)a(t[o])||(n+=o+":"+et(t[o])+",");it.set(t,n)}}else n=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return n},F=new WeakMap,ht={},at={},Tt="undefined",ct=typeof window!=Tt,gt=typeof document!=Tt,ge=()=>ct&&typeof window.requestAnimationFrame!=Tt,kt=(t,e)=>{const s=F.get(t);return[()=>!a(e)&&t.get(e)||ht,r=>{if(!a(e)){const n=t.get(e);e in at||(at[e]=n),s[5](e,P(n,r),n||ht)}},s[6],()=>!a(e)&&e in at?at[e]:!a(e)&&t.get(e)||ht]};let Rt=!0;const Re=()=>Rt,[wt,St]=ct&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[U,U],we=()=>{const t=gt&&document.visibilityState;return a(t)||t!=="hidden"},Se=t=>(gt&&document.addEventListener("visibilitychange",t),wt("focus",t),()=>{gt&&document.removeEventListener("visibilitychange",t),St("focus",t)}),_e=t=>{const e=()=>{Rt=!0,t()},s=()=>{Rt=!1};return wt("online",e),wt("offline",s),()=>{St("online",e),St("offline",s)}},ve={isOnline:Re,isVisible:we},Te={initFocus:Se,initReconnect:_e},jt=!vt.useId,nt=!ct||"Deno"in window,ye=t=>ge()?window.requestAnimationFrame(t):setTimeout(t,1),Et=nt?p.useEffect:p.useLayoutEffect,pt=typeof navigator<"u"&&navigator.connection,Wt=!nt&&pt&&(["slow-2g","2g"].includes(pt.effectiveType)||pt.saveData),yt=t=>{if(M(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?et(t):"",[t,e]};let xe=0;const _t=()=>++xe,qt=0,Bt=1,Ht=2,be=3;var tt={__proto__:null,ERROR_REVALIDATE_EVENT:be,FOCUS_EVENT:qt,MUTATE_EVENT:Ht,RECONNECT_EVENT:Bt};async function $t(...t){const[e,s,r,n]=t,o=P({populateCache:!0,throwOnError:!0},typeof n=="boolean"?{revalidate:n}:n||{});let c=o.populateCache;const d=o.rollbackOnError;let u=o.optimisticData;const b=o.revalidate!==!1,R=C=>typeof d=="function"?d(C):d!==!1,w=o.throwOnError;if(M(s)){const C=s,_=[],D=e.keys();for(const V of D)!/^\$(inf|sub)\$/.test(V)&&C(e.get(V)._k)&&_.push(V);return Promise.all(_.map(A))}return A(s);async function A(C){const[_]=yt(C);if(!_)return;const[D,V]=kt(e,_),[i,H,Q,k]=F.get(e),q=()=>{const T=i[_];return b&&(delete Q[_],delete k[_],T&&T[0])?T[0](Ht).then(()=>D().data):D().data};if(t.length<3)return q();let v=r,O;const m=_t();H[_]=[m,0];const $=!a(u),L=D(),z=L.data,st=L._c,B=a(st)?z:st;if($&&(u=M(u)?u(B,z):u,V({data:u,_c:B})),M(v))try{v=v(B)}catch(T){O=T}if(v&&pe(v))if(v=await v.catch(T=>{O=T}),m!==H[_][0]){if(O)throw O;return v}else O&&$&&R(O)&&(c=!0,V({data:B,_c:x}));if(c&&!O)if(M(c)){const T=c(v,B);V({data:T,error:x,_c:x})}else V({data:v,error:x,_c:x});if(H[_][1]=_t(),Promise.resolve(q()).then(()=>{V({_c:x})}),O){if(w)throw O;return}return v}}const Ft=(t,e)=>{for(const s in t)t[s][0]&&t[s][0](e)},Ce=(t,e)=>{if(!F.has(t)){const s=P(Te,e),r={},n=$t.bind(x,t);let o=U;const c={},d=(R,w)=>{const A=c[R]||[];return c[R]=A,A.push(w),()=>A.splice(A.indexOf(w),1)},u=(R,w,A)=>{t.set(R,w);const C=c[R];if(C)for(const _ of C)_(w,A)},b=()=>{if(!F.has(t)&&(F.set(t,[r,{},{},{},n,u,d]),!nt)){const R=s.initFocus(setTimeout.bind(x,Ft.bind(x,r,qt))),w=s.initReconnect(setTimeout.bind(x,Ft.bind(x,r,Bt)));o=()=>{R&&R(),w&&w(),F.delete(t)}}};return b(),[t,n,b,o]}return[t,F.get(t)[4]]},De=(t,e,s,r,n)=>{const o=s.errorRetryCount,c=n.retryCount,d=~~((Math.random()+.5)*(1<<(c<8?c:8)))*s.errorRetryInterval;!a(o)&&c>o||setTimeout(r,d,n)},Oe=(t,e)=>et(t)==et(e),[zt,Ie]=Ce(new Map),Ae=P({onLoadingSlow:U,onSuccess:U,onError:U,onErrorRetry:De,onDiscarded:U,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Wt?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Wt?5e3:3e3,compare:Oe,isPaused:()=>!1,cache:zt,mutate:Ie,fallback:{}},ve),Ve=(t,e)=>{const s=P(t,e);if(e){const{use:r,fallback:n}=t,{use:o,fallback:c}=e;r&&o&&(s.use=r.concat(o)),n&&c&&(s.fallback=P(n,c))}return s},Le=p.createContext({}),Ne="$inf$",Jt=ct&&window.__SWR_DEVTOOLS_USE__,je=Jt?window.__SWR_DEVTOOLS_USE__:[],We=()=>{Jt&&(window.__SWR_DEVTOOLS_REACT__=vt)},Fe=t=>M(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Me=()=>P(Ae,p.useContext(Le)),Ue=t=>(e,s,r)=>t(e,s&&((...o)=>{const[c]=yt(e),[,,,d]=F.get(zt);if(c.startsWith(Ne))return s(...o);const u=d[c];return a(u)?s(...o):(delete d[c],u)}),r),Pe=je.concat(Ue),ke=t=>function(...s){const r=Me(),[n,o,c]=Fe(s),d=Ve(r,c);let u=t;const{use:b}=d,R=(b||[]).concat(Pe);for(let w=R.length;w--;)u=R[w](u);return u(n,o||d.fetcher||null,d)},qe=(t,e,s)=>{const r=e[t]||(e[t]=[]);return r.push(s),()=>{const n=r.indexOf(s);n>=0&&(r[n]=r[r.length-1],r.pop())}};We();const Mt=vt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),mt={dedupe:!0},Be=(t,e,s)=>{const{cache:r,compare:n,suspense:o,fallbackData:c,revalidateOnMount:d,revalidateIfStale:u,refreshInterval:b,refreshWhenHidden:R,refreshWhenOffline:w,keepPreviousData:A}=s,[C,_,D,V]=F.get(r),[i,H]=yt(t),Q=p.useRef(!1),k=p.useRef(!1),q=p.useRef(i),v=p.useRef(e),O=p.useRef(s),m=()=>O.current,$=()=>m().isVisible()&&m().isOnline(),[L,z,st,B]=kt(r,i),T=p.useRef({}).current,Kt=a(c)?s.fallback[i]:c,xt=(l,f)=>{for(const S in T){const h=S;if(h==="data"){if(!n(l[h],f[h])&&(!a(l[h])||!n(ot,f[h])))return!1}else if(f[h]!==l[h])return!1}return!0},bt=p.useMemo(()=>{const l=(()=>!i||!e?!1:a(d)?m().isPaused()||o?!1:a(u)?!0:u:d)(),f=y=>{const j=P(y);return delete j._k,l?{isValidating:!0,isLoading:!0,...j}:j},S=L(),h=B(),N=f(S),G=S===h?N:f(h);let g=N;return[()=>{const y=f(L());return xt(y,g)?(g.data=y.data,g.isLoading=y.isLoading,g.isValidating=y.isValidating,g.error=y.error,g):(g=y,y)},()=>G]},[r,i]),J=Ee.useSyncExternalStore(p.useCallback(l=>st(i,(f,S)=>{xt(S,f)||l()}),[r,i]),bt[0],bt[1]),Ct=!Q.current,Yt=C[i]&&C[i].length>0,K=J.data,Y=a(K)?Kt:K,rt=J.error,Dt=p.useRef(Y),ot=A?a(K)?Dt.current:K:Y,Ot=(()=>Yt&&!a(rt)?!1:Ct&&!a(d)?d:m().isPaused()?!1:o?a(Y)?!1:u:a(Y)||u)(),It=!!(i&&e&&Ct&&Ot),Gt=a(J.isValidating)?It:J.isValidating,Xt=a(J.isLoading)?It:J.isLoading,Z=p.useCallback(async l=>{const f=v.current;if(!i||!f||k.current||m().isPaused())return!1;let S,h,N=!0;const G=l||{},g=!D[i]||!G.dedupe,y=()=>jt?!k.current&&i===q.current&&Q.current:i===q.current,j={isValidating:!1,isLoading:!1},Vt=()=>{z(j)},Lt=()=>{const I=D[i];I&&I[1]===h&&delete D[i]},Nt={isValidating:!0};a(L().data)&&(Nt.isLoading=!0);try{if(g&&(z(Nt),s.loadingTimeout&&a(L().data)&&setTimeout(()=>{N&&y()&&m().onLoadingSlow(i,s)},s.loadingTimeout),D[i]=[f(H),_t()]),[S,h]=D[i],S=await S,g&&setTimeout(Lt,s.dedupingInterval),!D[i]||D[i][1]!==h)return g&&y()&&m().onDiscarded(i),!1;j.error=x;const I=_[i];if(!a(I)&&(h<=I[0]||h<=I[1]||I[1]===0))return Vt(),g&&y()&&m().onDiscarded(i),!1;const W=L().data;j.data=n(W,S)?W:S,g&&y()&&m().onSuccess(S,i,s)}catch(I){Lt();const W=m(),{shouldRetryOnError:ut}=W;W.isPaused()||(j.error=I,g&&y()&&(W.onError(I,i,W),(ut===!0||M(ut)&&ut(I))&&$()&&W.onErrorRetry(I,i,W,Qt=>{const lt=C[i];lt&&lt[0]&&lt[0](tt.ERROR_REVALIDATE_EVENT,Qt)},{retryCount:(G.retryCount||0)+1,dedupe:!0})))}return N=!1,Vt(),!0},[i,r]),At=p.useCallback((...l)=>$t(r,q.current,...l),[]);if(Et(()=>{v.current=e,O.current=s,a(K)||(Dt.current=K)}),Et(()=>{if(!i)return;const l=Z.bind(x,mt);let f=0;const h=qe(i,C,(N,G={})=>{if(N==tt.FOCUS_EVENT){const g=Date.now();m().revalidateOnFocus&&g>f&&$()&&(f=g+m().focusThrottleInterval,l())}else if(N==tt.RECONNECT_EVENT)m().revalidateOnReconnect&&$()&&l();else{if(N==tt.MUTATE_EVENT)return Z();if(N==tt.ERROR_REVALIDATE_EVENT)return Z(G)}});return k.current=!1,q.current=i,Q.current=!0,z({_k:H}),Ot&&(a(Y)||nt?l():ye(l)),()=>{k.current=!0,h()}},[i]),Et(()=>{let l;function f(){const h=M(b)?b(L().data):b;h&&l!==-1&&(l=setTimeout(S,h))}function S(){!L().error&&(R||m().isVisible())&&(w||m().isOnline())?Z(mt).then(f):f()}return f(),()=>{l&&(clearTimeout(l),l=-1)}},[b,R,w,i]),p.useDebugValue(ot),o&&a(Y)&&i){if(!jt&&nt)throw new Error("Fallback data is required when using suspense in SSR.");v.current=e,O.current=s,k.current=!1;const l=V[i];if(!a(l)){const f=At(l);Mt(f)}if(a(rt)){const f=Z(mt);a(ot)||(f.status="fulfilled",f.value=!0),Mt(f)}else throw rt}return{mutate:At,get data(){return T.data=!0,ot},get error(){return T.error=!0,rt},get isValidating(){return T.isValidating=!0,Gt},get isLoading(){return T.isLoading=!0,Xt}}},He=ke(Be),$e=()=>fetch("/api/base/get-weather?city=Barrie").then(t=>t.json()).catch(t=>new Error("Error fetching weather"));function Je(){const{data:t,error:e}=He("/api/base/get-weather?city=Barrie",$e,{suspense:!0}),[s,r]=p.useState("Barrie"),[n,o]=p.useState(t.data),c=async()=>{const b=await Zt(`/api/base/get-weather?city=${s}`,"get");o(b)},d=p.useRef(!1);p.useEffect(()=>{d.current?c():d.current=!0},[s]);const u={marginRight:"10px",width:"25px"};return e?E.jsx("h1",{className:"my-5",children:"Error loading weather"}):E.jsx("div",{style:{borderRadius:"20px",padding:"20px",height:"100%",width:"100%",maxWidth:"600px",overflowY:"hidden",display:"flex",flexDirection:"column",alignItems:"center"},children:E.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[E.jsx("h2",{style:{fontSize:"2rem"},children:n.date}),E.jsx("div",{style:{width:"75%",height:"10px",borderRadius:"5px",backgroundColor:"#c6e0e9"}}),E.jsxs("h2",{className:"text-center w-75 mt-3",children:["Weather for ",n.city]}),E.jsxs("h6",{style:{display:n.city==="Barrie"?"block":"none",fontWeight:700},children:["Lake Simcoe water temperature: ",n.waterTemp]}),E.jsx("div",{style:{width:"75%",height:"10px",borderRadius:"5px",backgroundColor:"#c6e0e9",margin:"10px 0"}}),E.jsx("h2",{children:n.description}),E.jsx("img",{width:"75px",height:"75px",src:`https://gibbontechnology.ca/weatherIcons/${n.icon}.png`,alt:"Weather icon"}),E.jsxs("h3",{children:[E.jsx("img",{src:re,alt:"Sunrise icon",style:u}),n.temp,E.jsx("img",{src:se,alt:"Sunrise icon",style:u})]}),E.jsxs("h3",{children:[E.jsx("img",{src:ne,alt:"Sunrise icon",style:u}),n.wind_direction," ",n.speed," km/h"]}),E.jsxs("h3",{children:[E.jsx("img",{src:te,alt:"Sunrise icon",style:u}),n.sunrise]}),E.jsxs("h3",{children:[E.jsx("img",{src:ee,alt:"Sunrise icon",style:u}),n.sunset]}),E.jsxs("button",{className:"btn btn-primary btn-lg w-75 my-3",style:{width:"100%",margin:"20px 0"},onClick:()=>r(s==="Barrie"?"Toronto":"Barrie"),children:["Switch to ",s==="Barrie"?"Toronto":"Barrie"]}),E.jsxs("h4",{children:["Updated at: ",n.updateTime]})]})})}export{Je as default};
